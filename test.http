### Variáveis
@baseUrl = http://localhost:3000
@phone = 5585998546812
@companyId = 1

### Enviar mensagem de texto
POST {{baseUrl}}/whatsapp/send
Content-Type: application/json

{
    "to": "{{phone}}",
    "message": "Olá! Esta é uma mensagem de teste."
}

### Enviar mensagem de template simples
POST {{baseUrl}}/whatsapp/send-template
Content-Type: application/json

{
    "to": "{{phone}}",
    "name": "hello_world",
    "companyId": {{ companyId }},
    "language": "en_US"
}

### Enviar mensagem de template com parâmetros
POST {{baseUrl}}/whatsapp/send-template
Content-Type: application/json

{
    "to": "{{phone}}",
    "name": "welcome_user",
    "companyId": {{ companyId }},
    "language": "pt_BR",
    "components": [
        {
            "type": "body",
            "parameters": [
                {
                    "type": "text",
                    "text": "João"
                }
            ]
        }
    ]
}

### Listar templates disponíveis
GET {{baseUrl}}/whatsapp/templates/{{companyId}}

### Listar chats de um usuário
GET {{baseUrl}}/whatsapp/chats/1

### Webhook de verificação (simulação)
GET {{baseUrl}}/whatsapp/webhook?hub.mode=subscribe&hub.verify_token=seu_token_aqui&hub.challenge=1234567890

### Webhook de mensagem (exemplo de payload)
POST {{baseUrl}}/whatsapp/webhook
Content-Type: application/json

{
    "object": "whatsapp_business_account",
    "entry": [
        {
            "id": "WHATSAPP_BUSINESS_ACCOUNT_ID",
            "changes": [
                {
                    "value": {
                        "messaging_product": "whatsapp",
                        "metadata": {
                            "display_phone_number": "5511999999999",
                            "phone_number_id": "PHONE_NUMBER_ID"
                        },
                        "messages": [
                            {
                                "from": "{{phone}}",
                                "id": "wamid.ID",
                                "timestamp": "1234567890",
                                "text": {
                                    "body": "Olá, preciso de ajuda!"
                                },
                                "type": "text"
                            }
                        ]
                    },
                    "field": "messages"
                }
            ]
        }
    ]
} 